package org.nilennoct.controller;

import org.nilennoct.model.FairyEvent;
import org.nilennoct.model.FairyInfo;
import org.nilennoct.model.FriendInfo;
import org.nilennoct.model.UserInfo;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import static java.lang.Integer.parseInt;

/**
 * Created with IntelliJ IDEA.
 * User: Neo
 * Date: 13-9-5
 * Time: 下午1:40
 */
public class XMLParser {
	private static XPath xPath = XPathFactory.newInstance().newXPath();

	public static void main(String args[]) throws ParserConfigurationException, IOException, SAXException, XPathExpressionException {
		String xml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><response><header><error><code>0</code></error><session_id>pl9qrhgmn9fvjg15q9ot3o39u0</session_id><revision><card_rev>200</card_rev><boss_rev>169</boss_rev><item_rev>168</item_rev><card_category_rev>200</card_category_rev><gacha_rev>144</gacha_rev><privilege_rev>144</privilege_rev><combo_rev>177</combo_rev><eventbanner_rev>1</eventbanner_rev><resource_rev><revision>169</revision><filename>res</filename></resource_rev><resource_rev><revision>144</revision><filename>sound</filename></resource_rev><resource_rev><revision>158</revision><filename>advbg</filename></resource_rev><resource_rev><revision>144</revision><filename>cmpsheet</filename></resource_rev><resource_rev><revision>169</revision><filename>gacha</filename></resource_rev><resource_rev><revision>144</revision><filename>privilege</filename></resource_rev><resource_rev><revision>178</revision><filename>eventbanner</filename></resource_rev></revision><mainbg><pack_name>mainbg_5_wi</pack_name><band>1,5,11,21,31,41,51,61,71,81,91,101,111</band></mainbg><your_data><name>nileog</name><leader_serial_id>100219313</leader_serial_id><town_level>9</town_level><percentage>91</percentage><gold>15386</gold><cp>0</cp><ap><current>81</current><max>81</max><interval_time>180</interval_time><last_update_time>1388753729</last_update_time><current_time>1388753729</current_time></ap><bc><current>32</current><max>32</max><interval_time>60</interval_time><last_update_time>1388753729</last_update_time><current_time>1388753729</current_time></bc><max_card_num>250</max_card_num><free_ap_bc_point>0</free_ap_bc_point><friendship_point>604</friendship_point><country_id>1</country_id><ex_gauge>80</ex_gauge><gacha_ticket>0</gacha_ticket><deck_rank>46</deck_rank><friends>14</friends><friend_max>22</friend_max><friends_invitations>13</friends_invitations><notice_of_menu>1</notice_of_menu><gacha_point>0</gacha_point><fairy_appearance>0</fairy_appearance><owner_card_list><user_card><serial_id>100233555</serial_id><master_card_id>18</master_card_id><holography>0</holography><hp>910</hp><power>1070</power><critical>0</critical><lv>2</lv><lv_max>5</lv_max><exp>200</exp><max_exp>760</max_exp><next_exp>260</next_exp><exp_diff>60</exp_diff><exp_per>62</exp_per><sale_price>150</sale_price><material_price>490</material_price><evolution_price>100</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100227228</serial_id><master_card_id>18</master_card_id><holography>0</holography><hp>1060</hp><power>1520</power><critical>0</critical><lv>5</lv><lv_max>5</lv_max><exp>760</exp><max_exp>760</max_exp><next_exp>0</next_exp><exp_diff>0</exp_diff><exp_per>0</exp_per><sale_price>610</sale_price><material_price>1760</material_price><evolution_price>100</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224628</serial_id><master_card_id>16</master_card_id><holography>0</holography><hp>890</hp><power>2490</power><critical>0</critical><lv>1</lv><lv_max>11</lv_max><exp>0</exp><max_exp>3700</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224627</serial_id><master_card_id>208</master_card_id><holography>0</holography><hp>2650</hp><power>760</power><critical>0</critical><lv>1</lv><lv_max>25</lv_max><exp>0</exp><max_exp>18960</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>170</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224626</serial_id><master_card_id>140</master_card_id><holography>0</holography><hp>1800</hp><power>1390</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224625</serial_id><master_card_id>53</master_card_id><holography>0</holography><hp>1320</hp><power>730</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224624</serial_id><master_card_id>4</master_card_id><holography>0</holography><hp>950</hp><power>830</power><critical>0</critical><lv>1</lv><lv_max>16</lv_max><exp>0</exp><max_exp>7800</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224622</serial_id><master_card_id>89</master_card_id><holography>0</holography><hp>1140</hp><power>640</power><critical>0</critical><lv>1</lv><lv_max>14</lv_max><exp>0</exp><max_exp>5980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224620</serial_id><master_card_id>89</master_card_id><holography>0</holography><hp>1140</hp><power>640</power><critical>0</critical><lv>1</lv><lv_max>14</lv_max><exp>0</exp><max_exp>5980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224619</serial_id><master_card_id>46</master_card_id><holography>0</holography><hp>890</hp><power>1180</power><critical>0</critical><lv>1</lv><lv_max>14</lv_max><exp>0</exp><max_exp>5980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224618</serial_id><master_card_id>42</master_card_id><holography>0</holography><hp>2160</hp><power>1210</power><critical>0</critical><lv>1</lv><lv_max>24</lv_max><exp>0</exp><max_exp>17480</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224617</serial_id><master_card_id>4</master_card_id><holography>0</holography><hp>950</hp><power>830</power><critical>0</critical><lv>1</lv><lv_max>16</lv_max><exp>0</exp><max_exp>7800</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224616</serial_id><master_card_id>85</master_card_id><holography>0</holography><hp>800</hp><power>660</power><critical>0</critical><lv>1</lv><lv_max>13</lv_max><exp>0</exp><max_exp>5160</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224615</serial_id><master_card_id>78</master_card_id><holography>0</holography><hp>950</hp><power>600</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224614</serial_id><master_card_id>140</master_card_id><holography>0</holography><hp>1800</hp><power>1390</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100224613</serial_id><master_card_id>82</master_card_id><holography>0</holography><hp>750</hp><power>900</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219358</serial_id><master_card_id>208</master_card_id><holography>0</holography><hp>2650</hp><power>760</power><critical>0</critical><lv>1</lv><lv_max>25</lv_max><exp>0</exp><max_exp>18960</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>170</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219357</serial_id><master_card_id>47</master_card_id><holography>0</holography><hp>860</hp><power>1200</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219356</serial_id><master_card_id>15</master_card_id><holography>0</holography><hp>1120</hp><power>650</power><critical>0</critical><lv>1</lv><lv_max>12</lv_max><exp>0</exp><max_exp>4400</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219353</serial_id><master_card_id>9</master_card_id><holography>0</holography><hp>790</hp><power>320</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219351</serial_id><master_card_id>139</master_card_id><holography>0</holography><hp>790</hp><power>320</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219348</serial_id><master_card_id>85</master_card_id><holography>0</holography><hp>800</hp><power>660</power><critical>0</critical><lv>1</lv><lv_max>13</lv_max><exp>0</exp><max_exp>5160</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219347</serial_id><master_card_id>141</master_card_id><holography>0</holography><hp>890</hp><power>850</power><critical>0</critical><lv>1</lv><lv_max>16</lv_max><exp>0</exp><max_exp>7800</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219345</serial_id><master_card_id>132</master_card_id><holography>0</holography><hp>660</hp><power>450</power><critical>0</critical><lv>1</lv><lv_max>14</lv_max><exp>0</exp><max_exp>5980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219344</serial_id><master_card_id>53</master_card_id><holography>0</holography><hp>1320</hp><power>730</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219341</serial_id><master_card_id>208</master_card_id><holography>0</holography><hp>2650</hp><power>760</power><critical>0</critical><lv>1</lv><lv_max>25</lv_max><exp>0</exp><max_exp>18960</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>170</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219340</serial_id><master_card_id>53</master_card_id><holography>0</holography><hp>1320</hp><power>730</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219338</serial_id><master_card_id>68</master_card_id><holography>0</holography><hp>810</hp><power>650</power><critical>0</critical><lv>1</lv><lv_max>13</lv_max><exp>0</exp><max_exp>5160</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219337</serial_id><master_card_id>132</master_card_id><holography>0</holography><hp>660</hp><power>450</power><critical>0</critical><lv>1</lv><lv_max>14</lv_max><exp>0</exp><max_exp>5980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219336</serial_id><master_card_id>34</master_card_id><holography>0</holography><hp>1480</hp><power>1370</power><critical>0</critical><lv>1</lv><lv_max>33</lv_max><exp>0</exp><max_exp>32960</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>600</sale_price><material_price>300</material_price><evolution_price>300</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219335</serial_id><master_card_id>127</master_card_id><holography>0</holography><hp>950</hp><power>830</power><critical>0</critical><lv>1</lv><lv_max>17</lv_max><exp>0</exp><max_exp>8800</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219334</serial_id><master_card_id>15</master_card_id><holography>0</holography><hp>1120</hp><power>650</power><critical>0</critical><lv>1</lv><lv_max>12</lv_max><exp>0</exp><max_exp>4400</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219333</serial_id><master_card_id>78</master_card_id><holography>0</holography><hp>950</hp><power>600</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219331</serial_id><master_card_id>53</master_card_id><holography>0</holography><hp>1320</hp><power>730</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219330</serial_id><master_card_id>140</master_card_id><holography>0</holography><hp>1800</hp><power>1390</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219329</serial_id><master_card_id>139</master_card_id><holography>0</holography><hp>790</hp><power>320</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219328</serial_id><master_card_id>46</master_card_id><holography>0</holography><hp>890</hp><power>1180</power><critical>0</critical><lv>1</lv><lv_max>14</lv_max><exp>0</exp><max_exp>5980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219327</serial_id><master_card_id>79</master_card_id><holography>0</holography><hp>1430</hp><power>900</power><critical>0</critical><lv>1</lv><lv_max>13</lv_max><exp>0</exp><max_exp>5160</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219325</serial_id><master_card_id>73</master_card_id><holography>0</holography><hp>1440</hp><power>890</power><critical>0</critical><lv>1</lv><lv_max>14</lv_max><exp>0</exp><max_exp>5980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219324</serial_id><master_card_id>53</master_card_id><holography>0</holography><hp>1320</hp><power>730</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219323</serial_id><master_card_id>190</master_card_id><holography>0</holography><hp>2070</hp><power>1600</power><critical>0</critical><lv>1</lv><lv_max>25</lv_max><exp>0</exp><max_exp>18960</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>170</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219322</serial_id><master_card_id>140</master_card_id><holography>0</holography><hp>1800</hp><power>1390</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219321</serial_id><master_card_id>78</master_card_id><holography>0</holography><hp>950</hp><power>600</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219320</serial_id><master_card_id>15</master_card_id><holography>0</holography><hp>1120</hp><power>650</power><critical>0</critical><lv>1</lv><lv_max>12</lv_max><exp>0</exp><max_exp>4400</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219319</serial_id><master_card_id>132</master_card_id><holography>0</holography><hp>660</hp><power>450</power><critical>0</critical><lv>1</lv><lv_max>14</lv_max><exp>0</exp><max_exp>5980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219318</serial_id><master_card_id>132</master_card_id><holography>0</holography><hp>660</hp><power>450</power><critical>0</critical><lv>1</lv><lv_max>14</lv_max><exp>0</exp><max_exp>5980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219317</serial_id><master_card_id>188</master_card_id><holography>0</holography><hp>2450</hp><power>2250</power><critical>0</critical><lv>1</lv><lv_max>30</lv_max><exp>0</exp><max_exp>27260</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>600</sale_price><material_price>300</material_price><evolution_price>300</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219316</serial_id><master_card_id>78</master_card_id><holography>0</holography><hp>950</hp><power>600</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219315</serial_id><master_card_id>47</master_card_id><holography>0</holography><hp>860</hp><power>1200</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219314</serial_id><master_card_id>82</master_card_id><holography>0</holography><hp>750</hp><power>900</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100219313</serial_id><master_card_id>142</master_card_id><holography>0</holography><hp>630</hp><power>620</power><critical>0</critical><lv>1</lv><lv_max>18</lv_max><exp>0</exp><max_exp>9860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100218240</serial_id><master_card_id>41</master_card_id><holography>0</holography><hp>789</hp><power>1093</power><critical>0</critical><lv>2</lv><lv_max>15</lv_max><exp>200</exp><max_exp>6860</max_exp><next_exp>260</next_exp><exp_diff>60</exp_diff><exp_per>62</exp_per><sale_price>150</sale_price><material_price>490</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>100206786</serial_id><master_card_id>18</master_card_id><holography>0</holography><hp>1060</hp><power>1520</power><critical>0</critical><lv>5</lv><lv_max>5</lv_max><exp>760</exp><max_exp>760</max_exp><next_exp>0</next_exp><exp_diff>0</exp_diff><exp_per>0</exp_per><sale_price>610</sale_price><material_price>1760</material_price><evolution_price>100</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97821452</serial_id><master_card_id>82</master_card_id><holography>0</holography><hp>750</hp><power>900</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97821451</serial_id><master_card_id>142</master_card_id><holography>0</holography><hp>630</hp><power>620</power><critical>0</critical><lv>1</lv><lv_max>18</lv_max><exp>0</exp><max_exp>9860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97821450</serial_id><master_card_id>53</master_card_id><holography>0</holography><hp>1320</hp><power>730</power><critical>0</critical><lv>1</lv><lv_max>19</lv_max><exp>0</exp><max_exp>10980</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97821449</serial_id><master_card_id>4</master_card_id><holography>0</holography><hp>1037</hp><power>842</power><critical>0</critical><lv>2</lv><lv_max>16</lv_max><exp>100</exp><max_exp>7800</max_exp><next_exp>260</next_exp><exp_diff>160</exp_diff><exp_per>0</exp_per><sale_price>150</sale_price><material_price>490</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97821448</serial_id><master_card_id>279</master_card_id><holography>0</holography><hp>2260</hp><power>1740</power><critical>0</critical><lv>1</lv><lv_max>25</lv_max><exp>0</exp><max_exp>18960</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>170</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97821447</serial_id><master_card_id>182</master_card_id><holography>0</holography><hp>1440</hp><power>1250</power><critical>0</critical><lv>1</lv><lv_max>22</lv_max><exp>0</exp><max_exp>14700</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>136</sale_price><material_price>300</material_price><evolution_price>200</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97821356</serial_id><master_card_id>26</master_card_id><holography>0</holography><hp>2280</hp><power>1780</power><critical>0</critical><lv>1</lv><lv_max>30</lv_max><exp>0</exp><max_exp>27260</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>600</sale_price><material_price>300</material_price><evolution_price>300</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97821315</serial_id><master_card_id>29</master_card_id><holography>0</holography><hp>3630</hp><power>3350</power><critical>0</critical><lv>1</lv><lv_max>35</lv_max><exp>0</exp><max_exp>37060</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>3300</sale_price><material_price>300</material_price><evolution_price>400</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97821206</serial_id><master_card_id>191</master_card_id><holography>0</holography><hp>2640</hp><power>2060</power><critical>0</critical><lv>1</lv><lv_max>30</lv_max><exp>0</exp><max_exp>27260</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>600</sale_price><material_price>300</material_price><evolution_price>300</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97820955</serial_id><master_card_id>569</master_card_id><holography>0</holography><hp>5480</hp><power>5870</power><critical>0</critical><lv>1</lv><lv_max>50</lv_max><exp>0</exp><max_exp>75460</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>600</sale_price><material_price>300</material_price><evolution_price>500</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97820954</serial_id><master_card_id>120</master_card_id><holography>0</holography><hp>3100</hp><power>3350</power><critical>0</critical><lv>1</lv><lv_max>45</lv_max><exp>0</exp><max_exp>61160</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>35000</sale_price><material_price>300</material_price><evolution_price>500</evolution_price><plus_limit_count>5</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97820953</serial_id><master_card_id>117</master_card_id><holography>0</holography><hp>3320</hp><power>2610</power><critical>0</critical><lv>1</lv><lv_max>45</lv_max><exp>0</exp><max_exp>61160</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>35000</sale_price><material_price>300</material_price><evolution_price>500</evolution_price><plus_limit_count>5</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97820952</serial_id><master_card_id>111</master_card_id><holography>0</holography><hp>3020</hp><power>2380</power><critical>0</critical><lv>1</lv><lv_max>45</lv_max><exp>0</exp><max_exp>61160</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>35000</sale_price><material_price>300</material_price><evolution_price>500</evolution_price><plus_limit_count>5</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97785651</serial_id><master_card_id>19</master_card_id><holography>0</holography><hp>1260</hp><power>517</power><critical>0</critical><lv>2</lv><lv_max>14</lv_max><exp>100</exp><max_exp>5980</max_exp><next_exp>260</next_exp><exp_diff>160</exp_diff><exp_per>0</exp_per><sale_price>206</sale_price><material_price>490</material_price><evolution_price>200</evolution_price><plus_limit_count>4</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97785351</serial_id><master_card_id>9</master_card_id><holography>0</holography><hp>790</hp><power>320</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97783274</serial_id><master_card_id>68</master_card_id><holography>0</holography><hp>810</hp><power>650</power><critical>0</critical><lv>1</lv><lv_max>13</lv_max><exp>0</exp><max_exp>5160</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97783273</serial_id><master_card_id>132</master_card_id><holography>0</holography><hp>711</hp><power>465</power><critical>0</critical><lv>2</lv><lv_max>14</lv_max><exp>100</exp><max_exp>5980</max_exp><next_exp>260</next_exp><exp_diff>160</exp_diff><exp_per>0</exp_per><sale_price>150</sale_price><material_price>490</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97783272</serial_id><master_card_id>141</master_card_id><holography>0</holography><hp>890</hp><power>850</power><critical>0</critical><lv>1</lv><lv_max>16</lv_max><exp>0</exp><max_exp>7800</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97783271</serial_id><master_card_id>47</master_card_id><holography>0</holography><hp>860</hp><power>1200</power><critical>0</critical><lv>1</lv><lv_max>15</lv_max><exp>0</exp><max_exp>6860</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>80</sale_price><material_price>300</material_price><evolution_price>100</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card><user_card><serial_id>97783270</serial_id><master_card_id>11</master_card_id><holography>0</holography><hp>1960</hp><power>1520</power><critical>0</critical><lv>1</lv><lv_max>30</lv_max><exp>0</exp><max_exp>27260</max_exp><next_exp>100</next_exp><exp_diff>100</exp_diff><exp_per>0</exp_per><sale_price>1200</sale_price><material_price>300</material_price><evolution_price>300</evolution_price><plus_limit_count>3</plus_limit_count><limit_over>0</limit_over></user_card></owner_card_list><itemlist><item_id>1</item_id><num>5</num></itemlist><itemlist><item_id>2</item_id><num>5</num></itemlist><itemlist><item_id>3</item_id><num>1</num></itemlist><fakecard><knight_id>1</knight_id><parts_no>1</parts_no><count>0</count></fakecard><guild_id>0</guild_id><guild_join_state>0</guild_join_state><guild_name><![CDATA[]]></guild_name></your_data><next_scene>2100</next_scene><lock_unlock><scenario_voice>1</scenario_voice></lock_unlock></header><body><login><user_id>1090553</user_id><push_fairy_yell>1</push_fairy_yell><push_good>0</push_good></login><mainmenu><current_bgfile>mainbg_nt</current_bgfile><previous_bgfile>mainbg_an</previous_bgfile><banner>\n" +
				" <!-- アプリ內ブラウザ起動 -->\n" +
				" <content>\n" +
				"     <action_id>3</action_id>\n" +
				"     <imagefile>mainmenu_event_1225.png</imagefile>\n" +
				"     <se>se_def_cancel_04_01</se>\n" +
				"     <x>222</x>\n" +
				"     <y>5</y>\n" +
				"     <url>/connect/web/premium_1225</url>\n" +
				" </content>\n" +
				"</banner><rewards>1</rewards><infomation><fairy_pose>1</fairy_pose><fairy_face>1</fairy_face><focus>off</focus><link>0</link><message><color>0xFFFFFF</color><text>首先探索並收集&#xA;騎士吧。</text></message></infomation><infomation><fairy_pose>1</fairy_pose><fairy_face>1</fairy_face><focus>off</focus><link>2</link><message><color>0xFFFFFF</color><text>亞瑟大人，亞瑟大人！&#xA;請攻略劇情，&#xA;踏出統一不列顛的腳步吧。</text></message></infomation><infomation><fairy_pose>1</fairy_pose><fairy_face>4</fairy_face><focus>off</focus><link>5</link><message><color>0xFFFFFF</color><text>可以查看以前邂逅的騎士們&#xA;的支線劇情喲。&#xA;有些緊張的說。</text></message></infomation><infomation><fairy_pose>1</fairy_pose><fairy_face>5</fairy_face><focus>off</focus><link>0</link><message><color>0xFFFFFF</color><text>亞瑟大人&#xA;收到禮物了喲。&#xA;是能派上用處的東西再好不過了。</text></message></infomation><infomation><fairy_pose>1</fairy_pose><fairy_face>1</fairy_face><focus>off</focus><link>0</link><message><color>0xFFFFFF</color><text>要想提升等級，就得進行探索&#xA;與戰鬥。請不斷地積攢力量&#xA;證明成為王的實力吧。</text></message></infomation><infomation><fairy_pose>1</fairy_pose><fairy_face>4</fairy_face><focus>off</focus><link>6</link><message><color>0xFFFFFF</color><text>哎呀？收到了來自其他&#xA;用戶的好友申請。&#xA;去確認一下吧。</text></message></infomation><infomation><fairy_pose>1</fairy_pose><fairy_face>8</fairy_face><focus>off</focus><link>6</link><message><color>0xFFFFFF</color><text>增加好友的話，&#xA;雙方的未分配點數都會增加3點。&#xA;點擊一下這裡看看。</text></message></infomation><infomation><fairy_pose>1</fairy_pose><fairy_face>9</fairy_face><focus>off</focus><link>3</link><message><color>0xFFFFFF</color><text>大量招待好友的話&#xA;獲得騎士卡片的機會&#xA;似乎會增加很多喲。</text></message></infomation><infomation><fairy_pose>1</fairy_pose><fairy_face>1</fairy_face><focus>off</focus><link>0</link><message><color>0xFFFFFF</color><text>要想提升等級，就得進行探索&#xA;與戰鬥。請不斷地累積力量&#xA;證明成為王的實力吧。</text></message></infomation><event_type>0</event_type></mainmenu><greeting_message><greeting>大家好.</greeting></greeting_message></body></response>\n";
		ByteArrayInputStream in = new ByteArrayInputStream(xml.getBytes("UTF-8"));

		DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
		DocumentBuilder db = dbf.newDocumentBuilder();
		Document doc = db.parse(in);
		doc.normalize();

		System.out.println(getErrorCode(doc));
	}

	@Deprecated
	public static Document parseXML(String xmlString) throws Exception{
		DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
		DocumentBuilder db = dbf.newDocumentBuilder();
		Document doc = db.parse(new ByteArrayInputStream(AES.decrypt(new ByteArrayInputStream(xmlString.getBytes("UTF-8")))));
		doc.normalize();

		return doc;
	}

	public static Document parseXML(InputStream in) throws Exception{
		DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
		DocumentBuilder db = dbf.newDocumentBuilder();
		InputStream xmlStream = new ByteArrayInputStream(AES.decrypt(in));
//		System.out.println(xmlStream.available());
		if (xmlStream.available() > 0) {
			Document doc = db.parse(xmlStream);
			doc.normalize();
			return doc;
		}

		throw new Exception("xml parse failed.");
	}

	public static String getValue(String path, Document doc) throws XPathExpressionException {
		return xPath.compile(path).evaluate(doc);
	}

	public static Node getNode(Node pNode, String tagName) {
		if (pNode != null) {
			NodeList cNodes = pNode.getChildNodes();
			for (int i = 0; i < cNodes.getLength(); ++i) {
				Node cNode = cNodes.item(i);
				if (cNode.getNodeName().equals(tagName)) {
					return cNode;
				}
			}
		}

		return null;
	}

	public static String getNodeValue(Document doc, String tagName) {
		NodeList nodes = doc.getElementsByTagName(tagName);
		return nodes.getLength() > 0 ? nodes.item(0).getTextContent() : "";
	}

	public static String getNodeValue(Node pNode, String tagName) {
		if (pNode != null) {
			/*NodeList cNodes = pNode.getChildNodes();
			for (int i = 0; i < cNodes.getLength(); ++i) {
				Node cNode = cNodes.item(i);
				if (cNode.getNodeName().equals(tagName)) {
					return cNode.getTextContent();
				}
			}*/
			return ((Element) pNode).getElementsByTagName(tagName).item(0).getTextContent();
		}

		return "";
	}

	public static int getErrorCode(Document doc) throws XPathExpressionException {
		//		switch (code) {
//			case 1020:{
//				code = 9000;
//			}
//		}
//		Random random = new Random();
//		if (random.nextInt(10) >= 7) code = 8000;
		int code;
		try {
			code = parseInt(getValue("/response/header/error/code", doc));
		} catch (NullPointerException e) {
			code = 0;
		}

		return code;
	}

	public static UserInfo getUserInfo(Document doc) {
		UserInfo userInfo = new UserInfo();
		Node user = doc.getElementsByTagName("your_data").item(0);

		userInfo.name = getNodeValue(user, "name");
		userInfo.town_level = getNodeValue(user, "town_level");
		userInfo.free_ap_bc_point = parseInt(getNodeValue(user, "free_ap_bc_point"));
		user = doc.getElementsByTagName("ap").item(0);
		userInfo.ap_current = parseInt(getNodeValue(user, "current"));
		userInfo.ap_max = parseInt(getNodeValue(user, "max"));
		user = doc.getElementsByTagName("bc").item(0);
		userInfo.bc_current = parseInt(getNodeValue(user, "current"));
		userInfo.bc_max = parseInt(getNodeValue(user, "max"));

		return userInfo;
	}

	public static FriendInfo getFriendInfo(Element user) {
		FriendInfo friendInfo = new FriendInfo();
		friendInfo.id = getNodeValue(user, "id");
		friendInfo.level = getNodeValue(user, "town_level");
		friendInfo.last_login = getNodeValue(user, "last_login");
		friendInfo.name = getNodeValue(user, "name") + " Lv." + friendInfo.level;

		return friendInfo;
	}

	public static FairyInfo getFairyInfo(Document doc) {
		FairyInfo fairyInfo = new FairyInfo();
		Node fairy = doc.getElementsByTagName("fairy").item(0);
		fairyInfo.serial_id = getNodeValue(fairy, "serial_id");
		fairyInfo.user_id = getNodeValue(fairy, "discoverer_id");
//		fairyInfo.master_boss_id = getNodeValue(fairy, "master_boss_id");
		fairyInfo.lv = getNodeValue(fairy, "lv");
		fairyInfo.name = getNodeValue(fairy, "name") + " Lv." + fairyInfo.lv;
		fairyInfo.race_type = getNodeValue(fairy, "race_type");

		return fairyInfo;
	}

	public static FairyEvent getFairyEvent(Element fairy_event) {
		String put_down = fairy_event.getElementsByTagName("put_down").item(0).getTextContent();
//		System.out.println("put_down: " + put_down);
		if ( ! put_down.equals("1")) {
			return null;
		}

		FairyEvent fairyEvent = new FairyEvent();

		Element user = (Element) fairy_event.getElementsByTagName("user").item(0);
		fairyEvent.user_id = user.getElementsByTagName("id").item(0).getTextContent();
		fairyEvent.username = user.getElementsByTagName("name").item(0).getTextContent();
		Element fairy = (Element) fairy_event.getElementsByTagName("fairy").item(0);
		fairyEvent.serial_id = fairy.getElementsByTagName("serial_id").item(0).getTextContent();
		fairyEvent.lv = fairy.getElementsByTagName("lv").item(0).getTextContent();
		fairyEvent.name = fairy.getElementsByTagName("name").item(0).getTextContent() + " Lv." + fairyEvent.lv;
//		fairyEvent.start_time = fairy_event.getElementsByTagName("start_time").item(0).getTextContent();
		fairyEvent.put_down = put_down;
		fairyEvent.race_type = getNodeValue(fairy, "race_type");

		return fairyEvent;
	}
}
